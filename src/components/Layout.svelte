<script lang="ts">
  import { onMount } from "svelte";
  import { gsap } from "gsap";
  import Navbar from "@/components/Navbar.svelte";
  import Footer from "@/components/Footer.svelte";

  onMount(() => {
    gsap.to("#loading", {
      clipPath: "polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",
      duration: 1.275,
      ease: "power3.inOut",
    });
  });
</script>

<div
  class="mx-auto max-w-screen-sm isolate flex flex-col h-screen max-md:px-2.5"
>
  <div
    class="crt text-6xl absolute hidden md:block font-extrabold tracking-widest text-gray-800 left-8 top-[50%] transform -translate-y-1/2 dark:text-gray-200 font-scanline"
    style="writing-mode: vertical-rl; text-orientation: upright; letter-spacing: 0.2em;"
  >
    <span>幸せ</span>
  </div>
  
  <Navbar />

  <div
    class="bg-gray-50 dark:bg-zinc-900/90 z-20 border-t rounded-lg basis-full flex-shrink overflow-y-hidden shadow border-t-gray-600/70 dark:border-t-gray-300/70 w-full overflow-x-hidden min-h-0 mt-5 mb-2 relative"
  >
    <div class="p-5 overflow-y-auto h-full">
      <slot />
      <div
        id="loading"
        class="absolute inset-0 z-50 bg-gray-50 dark:bg-zinc-900 flex items-center justify-center"
        style="clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"
      >
        <div class="flex items-center justify-center pt-2">
          <pre class="shimmer-text scale-50">
. ......... ...... .................... ..... ..................................
 ....... ............................... .................. ........... ... ....
. .......... . ....... .................................. ......................
 ................................... ...............................  ... .... .
..... ............................................. ............................
.............. ......... ........ ....... .. ................. .................
. ......... .............................. .......... .............. ... .. ....
............... ..............................  ..... ........ ............:+@@%
............................................................ . ......#@%%%%%%%%%
 ................. ........  ............ .....................:#@%%%%%%%%%%%%%%
... ...... .........  ......  .......... ............ .....:%%%%%%%%%%%%%@=:....
................................ ................. .....%%%%%%%%%%%%#...........
.... ........... .....................   ....... ...#=------%%%%%%%@@@@@@@@@:...
...............................................    .....=@#%%%%%%%%%%%#:........
....... . ...........................................+%%%%%%%...................
................ ........................*##%%%%%%%%%%%%%-.. . .................
................ .... ....... ....... ....#%%%%%%%%%%%%........ ........ .......
 ...................................... ...............................  .......
....*@%%%%%%%%@#......................... .. .................... ..............
.@%%%%%%%%%%%%%%%%%....................... ................. . ............. ...
%%%%%@=.....:%%%%%%%@:........ ......... ........ ............................ .
%%%*%%#... .....%%%%%%%-.. .....................................................
%+...#%%:... ..=%%#%%%#%%=.................................. ...................
.......@%%:..:@%@....%%%%%%:... .......................................... .....
 . .....:@%%%%%:. .....%%%%%%....... ...................... ....................
.... ....:%%%#...........%%%%%%.................................................
%..... .%%@:*%%#.......+%%@%%%%%#... ............. . ...........................
%#%...@%%=....#%%#...=%%%...-%%%%%+. ..... ....... .............................
.%%%#%%#.... ...%%%%%%@.......%%%%%%:.............. ............................
..=%%@....... ....%%%+... ......%%%%%@.. .......... . ..........................
.%%%-%%#.... ...%%%+%%%...... .%%%%%%%%%.................................... ...
%%#...#%%+....%%%*...*%%=....#%%%..%%%%%#+......................................
:.. ....@%%--%%%..... .%%@.*%%%.. ...@%%%%%-....................................
. ........%%%%.. .. .....%%%%.... .....%%%%%%-.. ...............................
... . ..-%%%%%%.. ......%%%%%%... .....#%%###%%:....... ........................
%#.....@%%:..*%%%.....%%%=..*%%%.....#%%#.@#...-@@@@@@%.........................
*%%*.%%%=......#%%#.=%%#......*%%%.=%%@...........%%%%%%*.......................
..*%%%#... ......#%%%@. .. . ...#%%%%:........@#%%........ .....................
.@%%@%%=. .  . .:%%%%%=..  . ...%%%%%-..  .....:%%%#............................
      </pre>
        </div>
      </div>
    </div>
  </div>
  <Footer />
</div>
